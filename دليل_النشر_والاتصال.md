# دليل النشر والاتصال - Tabib IQ Frontend

## 🔍 الوضع الحالي

- **Backend**: يعمل على Railway (`tabib-iq-backend`)
- **Frontend**: يعمل على Vercel/Server (`tabib-iq-frontend`)
- **المشكلة**: MongoDB غير متصل في Backend

## 🛠️ الإصلاحات المطبقة

### 1. تحديث متغيرات البيئة
✅ **تحديث API URL** ليشير إلى Railway Backend
✅ **إضافة تعليقات توضيحية** في ملفات البيئة

### 2. إضافة أدوات الاختبار
✅ **سكريبت اختبار API** للتحقق من الاتصال
✅ **دليل شامل** للنشر والاتصال

## 🚀 خطوات النشر

### الخطوة 1: تحديث متغيرات البيئة

#### في Vercel/Server:
1. اذهب إلى إعدادات المشروع
2. حدث متغيرات البيئة:
   ```bash
   REACT_APP_API_URL=https://tabib-iq-backend-production.up.railway.app/api
   REACT_APP_ENV=production
   ```

#### في Railway (Backend):
1. اذهب إلى متغيرات البيئة في Railway
2. حدث `MONGO_URI` بسلسلة الاتصال الصحيحة:
   ```bash
   MONGO_URI=mongodb+srv://username:password@cluster.actual.mongodb.net/database
   ```

### الخطوة 2: اختبار الاتصال

#### اختبار Backend:
```bash
cd tabib-iq-backend
node اختبار-اتصال-mongodb.js
```

#### اختبار Frontend:
```bash
cd tabib-iq-frontend
node اختبار-اتصال-API.js
```

### الخطوة 3: النشر

#### نشر Backend:
```bash
cd tabib-iq-backend
git add .
git commit -m "إصلاح اتصال MongoDB وإضافة نقطة نهاية الصحة"
git push
```

#### نشر Frontend:
```bash
cd tabib-iq-frontend
git add .
git commit -m "تحديث API URL للاتصال بـ Railway Backend"
git push
```

## 🔧 استكشاف الأخطاء

### إذا كان MongoDB غير متصل:

1. **تحقق من MongoDB URI في Railway:**
   - اذهب إلى Railway Dashboard
   - تحقق من متغيرات البيئة
   - تأكد من صحة `MONGO_URI`

2. **اختبر الاتصال محلياً:**
   ```bash
   cd tabib-iq-backend
   node اختبار-اتصال-mongodb.js
   ```

3. **تحقق من سجلات Railway:**
   - ابحث عن رسائل الخطأ في سجلات النشر
   - تحقق من رسائل بدء الخادم

### إذا كان Frontend لا يتصل بـ Backend:

1. **تحقق من CORS في Backend:**
   - تأكد من أن `CORS_ORIGIN` يشمل مجال Frontend
   - تحقق من إعدادات CORS في `server.js`

2. **اختبر API مباشرة:**
   ```bash
   curl https://tabib-iq-backend-production.up.railway.app/api/health
   ```

3. **تحقق من متغيرات البيئة في Frontend:**
   - تأكد من أن `REACT_APP_API_URL` صحيح
   - تحقق من إعدادات Vercel/Server

## 📋 قائمة التحقق

### Backend (Railway):
- [ ] MongoDB URI صحيح ومختبر
- [ ] الخادم يبدأ بدون أخطاء
- [ ] نقطة نهاية الصحة تعمل
- [ ] CORS مُعد بشكل صحيح
- [ ] جميع متغيرات البيئة معينة

### Frontend (Vercel/Server):
- [ ] REACT_APP_API_URL يشير إلى Railway
- [ ] التطبيق يبدأ بدون أخطاء
- [ ] يمكن الوصول إلى API من المتصفح
- [ ] لا توجد أخطاء CORS
- [ ] جميع الميزات تعمل

## 🎯 النتائج المتوقعة

بعد تطبيق هذه الإصلاحات:
- ✅ **MongoDB متصل** في Backend
- ✅ **Frontend يتصل** بـ Backend بنجاح
- ✅ **جميع الميزات تعمل** بشكل صحيح
- ✅ **لا توجد أخطاء CORS**
- ✅ **النشر مستقر** على كلا المنصتين

## 📞 الدعم

### في حالة المشاكل:
1. تحقق من سجلات Railway و Vercel
2. شغل سكريبتات الاختبار
3. تحقق من متغيرات البيئة
4. راجع دليل الإصلاح الشامل

### روابط مفيدة:
- **Railway Dashboard**: [رابط المشروع]
- **Vercel Dashboard**: [رابط المشروع]
- **MongoDB Atlas**: [رابط المجموعة]
- **Health Check**: `https://tabib-iq-backend-production.up.railway.app/api/health`

---

**الحالة:** 🔧 قيد الإصلاح
**الخطوة التالية:** تحديث MongoDB URI في Railway 